openapi: 3.0.3
info:
  title: CREDIT2CRYPTO API
  version: 1.0.0
  description: >
    This endpoint allows a merchant to initiate a CREDIT2CRYPTO transaction to transfer funds from a merchantâ€™s crypto wallet to a customer.

# servers:
#   - url: https://{CHECKOUT_HOST}
#     description: Payment Platform Server
#     variables:
#       CHECKOUT_HOST:
#         default: api.paymentplatform.com
#         description: Base host for API calls

paths:
  /api/v1/payment/credit2crypto:
    post:
      summary: Credit2Crypto
      operationId: credit2crypto
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Credit2CryptoRequest'
            example:
              action: CREDIT2CRYPTO
              client_key: CLIENT123KEY
              channel_id: crypto-channel-01
              brand: AcmeCrypto
              order_id: order-789
              order_amount: "0.005"
              order_currency: BTC
              order_description: Crypto payout to customer
              crypto_network: ERC20
              parameters: []
              hash: 9b74c9897bac770ffc029102a200c5de
      responses:
        '200':
          description: CREDIT2CRYPTO transaction result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Credit2CryptoResponse'
              examples:
                init:
                  summary: INIT response
                  value:
                    action: CREDIT2CRYPTO
                    result: INIT
                    status: PENDING
                    order_id: order-789
                    trans_id: 9876abcd-ef12-4567-89ab-cdef12345678
                    trans_date: "2025-06-09 13:15:30"
                    descriptor: Crypto payout
                    amount: "0.005"
                    currency: BTC
                declined:
                  summary: Declined response
                  value:
                    action: CREDIT2CRYPTO
                    result: DECLINED
                    status: DECLINED
                    order_id: order-789
                    trans_id: 9876abcd-ef12-4567-89ab-cdef12345678
                    trans_date: "2025-06-09 13:15:30"
                    decline_reason: Invalid crypto address
                    amount: "0.005"
                    currency: BTC
                undefined:
                  summary: Undefined response
                  value:
                    action: CREDIT2CRYPTO
                    result: UNDEFINED
                    status: PREPARE
                    order_id: order-789
                    trans_id: 9876abcd-ef12-4567-89ab-cdef12345678
                    trans_date: "2025-06-09 13:15:30"
                    amount: "0.005"
                    currency: BTC

components:
  schemas:
    Credit2CryptoRequest:
      type: object
      required:
        - action
        - client_key
        - brand
        - order_id
        - order_amount
        - order_currency
        - order_description
        - hash
      properties:
        action:
          type: string
          enum: [CREDIT2CRYPTO]
          description: Operation type
          example: CREDIT2CRYPTO
        client_key:
          type: string
          description: Unique client key (CLIENT_KEY)
          example: CLIENT123KEY
        channel_id:
          type: string
          maxLength: 16
          description: Sub-account ID
          example: crypto-channel-01
        brand:
          type: string
          maxLength: 36
          description: Brand associated with the transaction
          example: AcmeCrypto
        order_id:
          type: string
          maxLength: 255
          description: Order ID in the client's system
          example: order-789
        order_amount:
          type: string
          description: Transaction amount
          example: "0.005"
        order_currency:
          type: string
          minLength: 3
          maxLength: 6
          description: Cryptocurrency code (e.g., BTC, ETH, USDT)
          example: BTC
        order_description:
          type: string
          maxLength: 1024
          description: Description of the transaction or product
          example: Crypto payout to customer
        crypto_network:
          type: string
          maxLength: 50
          description: Blockchain network (e.g., ERC20, TRC20, BEP20)
          example: ERC20
        parameters:
          type: array
          description: Array of brand-specific parameters
          items:
            type: object
          example: []
        hash:
          type: string
          description: Signature to validate request
          example: 9b74c9897bac770ffc029102a200c5de

    Credit2CryptoResponse:
      type: object
      required:
        - action
        - result
        - status
        - order_id
        - trans_id
        - trans_date
        - amount
        - currency
      properties:
        action:
          type: string
          example: CREDIT2CRYPTO
        result:
          type: string
          enum: [INIT, SUCCESS, DECLINED, UNDEFINED]
        status:
          type: string
          enum: [PENDING, SETTLED, DECLINED, PREPARE]
        order_id:
          type: string
          example: order-789
        trans_id:
          type: string
          example: 9876abcd-ef12-4567-89ab-cdef12345678
        trans_date:
          type: string
          format: date-time
          example: "2025-06-09 13:15:30"
        descriptor:
          type: string
          description: Additional description of the transaction
          example: Crypto payout
        decline_reason:
          type: string
          description: Reason the transaction was declined
          example: Invalid crypto address
        amount:
          type: string
          example: "0.005"
        currency:
          type: string
          example: BTC
